#include "ur_robot.h"

// URRobot::URRobot()
// {
//     URRobot(UR3e);
// }

URRobot::URRobot(RobotType type)
{
/*  obj.a = [0, -0.425, -0.3922, 0, 0, 0];
    obj.d = [0.1625, 0, 0, 0.1333, 0.0997, 0.0996];
    obj.alpha = [pi/2, 0, 0, pi/2, -pi/2, 0];

    % dynamics
    obj.m = [3.761, 8.058, 2.846, 1.37, 1.3, 0.365];
    pl1 = [0, -0.02561, 0.00193];
    pl2 = [0.2125, 0, 0.11336];
    pl3 = [0.15, 0, 0.0265];
    pl4 = [0, -0.0018, 0.01634];
    pl5 = [0,  0.0018, 0.01634];
    pl6 = [0, 0, -0.001159];
    
    obj.riCi = {pl1', pl2', pl3', pl4', pl5', pl6'};

    I1 = diag([0.0084, 0.0064, 0.0084]);
    I2 = diag([0.0078, 0.21, 0.21]);
    I3 = diag([0.0016, 0.0462, 0.0462]);
    I4 = diag([0, 0, 0]);
    I5 = diag([0, 0, 0]);
    I6 = diag([0.0001, 0.0001, 0.0001]);
*/
    N = 6;

    std::vector<std::vector<std::vector<double>>> temp_inertia_;
    std::vector<std::vector<double>> temp_com_;

    if (type == UR3e)
    {
        a2_ = -0.24355;
        a3_ = -0.2132;
        d1_ = 0.15185;
        // d3_ = 0.;
        d4_ = 0.13105;
        d5_ = 0.08535;
        d6_ = 0.0921;

        m_[0] = 1.98;
        m_[1] = 3.4445;
        m_[2] = 1.437;
        m_[3] = 0.871;
        m_[4] = 0.805;
        m_[5] = 0.261;

        temp_com_ = {
            {0, -0.02, 0.0},
            {0.13, 0, 0.1157},
            {0.05, 0, 0.0238},
            {0, 0, 0.01},
            {0, 0, 0.01},
            {0, 0, -0.02}
        };

        temp_inertia_ = {
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.000144}
            }
        };
    }
    else if (type == UR5e)
    {
        a2_ = -0.425;
        a3_ = -0.3922;

        d1_ =  0.1807;
        // d3_ = 0.;
        d4_ = 0.1333;
        d5_ = 0.0997;
        d6_ = 0.0996;

        m_[0] = 3.761;
        m_[1] = 8.058;
        m_[2] = 2.846;
        m_[3] = 1.37;
        m_[4] = 1.3;
        m_[5] = 0.365;

        temp_com_ = {
            {0, -0.02561, 0.00193},
            {0.2125, 0, 0.11336},
            {0.15, 0, 0.0265},
            {0, -0.0018, 0.01634},
            {0, 0.0018, 0.01634},
            {0, 0, -0.001159}
        };

        temp_inertia_ = {
            {
                {0.0084, 0., 0.},
                {0., 0.0064, 0.},
                {0., 0., 0.0064}
            },
            {
                {0.0078, 0., 0.},
                {0., 0.21, 0.},
                {0., 0., 0.21}
            },
            {
                {0.0016, 0., 0.},
                {0., 0.0462, 0.},
                {0., 0., 0.0462}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0., 0., 0.},
                {0., 0., 0.},
                {0., 0., 0.}
            },
            {
                {0.0001, 0., 0.},
                {0., 0.0001, 0.},
                {0., 0., 0.0001}
            }
        };
    }

    for (size_t i = 0; i < N; i++)
    {
        for (size_t j = 0; j < 3; j++)
        {
            com_[i][j] = temp_com_[i][j];
        }
    }


    for (size_t i = 0; i < N; i++)
    {
        for (size_t j = 0; j < 3; j++)
        {
            for (size_t k = 0; k < 3; k++)
            {
                link_inertia_[i][j][k] = temp_inertia_[i][j][k];
            }
        }
    }

    g[2] = -9.82;
}

URRobot::~URRobot()
{

}
